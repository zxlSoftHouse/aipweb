webpackJsonp([2],{"7b3l":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.button-start {\n  position: relative;\n}\n.button-start .start-image {\n    height: 18px;\n    width: 18px;\n    position: absolute;\n    left: 10px;\n    top: 9px;\n}\n.button-start .start-text {\n    position: absolute;\n    right: 10px;\n    top: 12px;\n}\n",""])},UyYx:function(t,e,a){var n=a("7b3l");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("72d21a51",n,!0)},a2bo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("WXGs"),i=a("0xDb"),s={data:function(){return{total:0,pageCount:10,pageIndex:0,tableData:[],multipleSelection:[],searchInfo:"",dialogObj:{isShow:!1,title:"",id:""},operation:""}},methods:{getTableData:function(){var t=this,e={pageIndex:t.pageIndex,pageCount:t.pageCount,user:"admin"};n.a.getList(e).then(function(e){t.tableData=e.rows,t.total=parseInt(e.total);var a=void 0;e.rows.map(function(t){a=Object(i.formatSeconds)(t.operation.split("|")[4]),"0"===t.operation.split("|")[3]?t.operation="[广播]文件,时长"+a:t.operation="[广播]文件,持续"+Object(i.formatSeconds)(t.operation.split("|")[3]);var e=t.description.split("|")[5];e=(e=(e=(e=(e=(e=(e=(e=e.replace(/1/g,"一")).replace(/2/g,"二")).replace(/3/g,"三")).replace(/4/g,"四")).replace(/5/g,"五")).replace(/6/g,"六")).replace(/7/g,"日")).replace(/</g,",");var n=void 0;return"1"==t.description.split("|")[1]?n="每周 ("+e+")":"0"==t.description.split("|")[1]&&(n="每天"),t.description="[定时]"+t.description.split("|")[4]+n+t.description.split("|")[2]+">"+t.description.split("|")[2],t})})},taskStartEnd:function(t){if(1==this.multipleSelection.length){var e;this.multipleSelection.map(function(t){e=t.id});var a={taskCommand:t,taskId:e};n.a.exetaskcmd(a).then(function(t){})}else this.multipleSelection.length>1?this.$message({type:"warning",message:"只能选择一条记录"}):this.$message({type:"warning",message:"请先选择一条记录"})},handleAdd:function(){this.dialogObj.isShow=!0,this.dialogObj.title="新增"},getCurrentPage:function(){var t=this.$route.query;t&&(t.page?this.currentPage=parseInt(t.page):this.currentPage=1)},handleEdit:function(){0!=this.multipleSelection.length?1===this.multipleSelection.length?(this.dialogObj.id=this.multipleSelection[0].id,this.dialogObj.isShow=!0,this.dialogObj.title="编辑"):this.$message({type:"warning",message:"不支持多条编辑"}):this.$message({type:"warning",message:"请先选择一条记录"})},handleClose:function(){this.dialogObj.isShow=!1,this.dialogObj.id=""},handleSelectionChange:function(t){this.multipleSelection=t},doDelete:function(t){var e=this;n.a.exetaskcmd(t).then(function(t){t?(e.$message({type:"success",message:"删除成功"}),e.getTableData()):e.$message.error("服务器错误")})},handleDelete:function(){var t=this;1==this.multipleSelection.length?this.$confirm("确定要删除此条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;t.multipleSelection.map(function(t){e=t.id});var a={taskCommand:"deltaskinfo",taskId:e};t.doDelete(a)}).catch(function(){t.$message({type:"info",message:"已取消删除"})}):this.multipleSelection.length>1?this.$message({type:"warning",message:"只能选择一条记录"}):this.$message({type:"warning",message:"请先选择一条记录"})},current_change:function(t){this.currentPage=t,this.getTableData()},init:function(){this.getCurrentPage(),this.getTableData()}},created:function(){this.init()},components:{edit:a("bqhD").default}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{background:"#fff"}},[n("el-row",[n("el-col",{attrs:{span:16}},[n("el-button",{staticClass:"button-start",staticStyle:{width:"75px",height:"36px"},attrs:{type:"fault"},on:{click:function(e){return t.taskStartEnd("runtaskinfo")}}},[n("img",{staticClass:"start-image",attrs:{src:a("fAJv")}}),t._v(" "),n("span",{staticClass:"start-text"},[t._v("开始")])]),t._v(" "),n("el-button",{staticClass:"button-start",staticStyle:{width:"75px",height:"36px"},attrs:{type:"fault"}},[n("img",{staticClass:"start-image",attrs:{src:a("axI4")}}),t._v(" "),n("span",{staticClass:"start-text",on:{click:function(e){return t.taskStartEnd("stoptaskinfo")}}},[t._v("暂停")])]),t._v(" "),n("el-button",{attrs:{type:"success"},on:{click:t.handleAdd}},[t._v("添加")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleEdit}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:t.handleDelete}},[t._v("删除")])],1)],1),t._v(" "),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"任务名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"state",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v("\n          "+t._s(t._f("broadcastTaskFlag")(e.row.state))+"\n        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"description",label:"触发器"}}),t._v(" "),n("el-table-column",{attrs:{prop:"operation",label:"操作"}})],1),t._v(" "),n("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.total,"page-size":t.pageCount},on:{"current-change":t.current_change}})],1),t._v(" "),n("edit",{attrs:{dialogObj:t.dialogObj},on:{handleClose:t.handleClose,init:t.init}})],1)},staticRenderFns:[]};var l=a("VU/8")(s,o,!1,function(t){a("UyYx")},null,null);e.default=l.exports},axI4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAA6klEQVRIie2VTUpDMRRGz02ik4qCVKRdgu5BNyK4BxF0Fw5E0CU4tPspCE4UpNZZ1dxcJ1bypE8iqRN9Z3Z/+E5CBoGOHyB58RLgbtvvv3l/LLD7MbfSHBPGQfV88Jhu1mbWHM556rm9+34YARtSEr0AE2L/WQ+2pno977l84WHTn9YIAMQIk3V/kvcaEnOyUyP4zIFBq0SMVK8AQFsllD1yCY2cr5JfoZN0kj8mkYVbS5Ys62b+u9Db6ngBM6atkt6rngGx1rMS9SKvQ16sahrNIocx+COBIZAo/xkdwsRFvfSarmoP+o95B+UKPwdfwRgRAAAAAElFTkSuQmCC"},fAJv:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABKklEQVQ4T63UOy9EQRgG4GfcOhL/ROEP7MYtEoXGnyBRbGJF1p1ESU2nkmgpdqOzOoVCQkOpEYVCiMuRJWvX4jh7mPJk5pn3zPfNBP88woe3r0uHEa12ZDyl3acGFuUFazhHTr+9NGgNLFnAfB1yoNWkrNNm4DiQyDO2tCvIuE4Cx4NVIXKLVU82DHuIg+vPcFEwF5sicqnFlD67P81rDqwlLotMGnTcCKcD35UI255NG3JVhf8CVtk7jBpQrHyoB5cEs0kq+WlO5N/AX385ecJIWZtxWSdxRUkCXgjyydqmZBmFb8+w0tjBim7rej0ma+zvwMrVCza1mU1z9RoTHngxYdBZM5Wvb5sZwaroDcgZsN8M9LWxD3W61+PGkbG3VybVqCVMtfzrolcRBF0VnC6+sgAAAABJRU5ErkJggg=="}});