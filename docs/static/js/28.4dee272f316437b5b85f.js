webpackJsonp([28],{z4pp:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("woOf"),n=l.n(a),r=l("vLgD"),i=function(e,t){return Object(r.a)({url:"api/SERVICE-AIP/deviceTender/queryPage",method:"post",data:{pageNum:e,pageSize:t}})},o=function(e){return Object(r.a)({url:"api/SERVICE-AIP/deviceTender/deleteByIdList",method:"post",data:e})},d=function(e){return Object(r.a)({url:"api/SERVICE-AIP/deviceTender/update",method:"put",data:e})},c={data:function(){return{flag:"",total:0,pageSize:10,currentPage:1,tableData:[],multipleSelection:[],showDialog:!1,dialogTitle:"",deviceTender:{rowId:"",venderCode:"",venderName:"",venderAddr:"",venderPhone:"",venderPrincipal:"",deviceType:""},rules:{},projectOptions:[],deviceTypeOptions:[{value:"00",label:"灯杆"},{value:"01",label:"灯"},{value:"02",label:"单灯控制器"},{value:"03",label:"集中控制器"},{value:"04",label:"LED"},{value:"05",label:"传感器"},{value:"06",label:"一键报警"},{value:"07",label:"监控"}],formLabelWidth:"100px"}},components:{},mounted:function(){this.getTableData()},methods:{getTableData:function(){var e=this;i(this.currentPage,this.pageSize).then(function(t){e.total=t.total,e.tableData=t.records})},handleAdd:function(){this.deviceTender.rowId="",this.flag="add",this.dialogTitle="新增",this.showDialog=!0},handleEdit:function(){if(this.flag="edit",0!=this.multipleSelection.length)if(1===this.multipleSelection.length){var e=this.multipleSelection[0];this.deviceTender=n()(this.deviceTender,e),this.dialogTitle="编辑",this.showDialog=!0}else this.$message({type:"warning",message:"不支持多条编辑"});else this.$message({type:"warning",message:"请先选择一条记录"})},handleDelete:function(){var e=this;0!=this.multipleSelection.length?this.$confirm("确定要删除此条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.multipleSelection.map(function(e){t.push(e.rowId)}),e.doDelete(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({type:"warning",message:"请先选择一条记录"})},doDelete:function(e){var t=this;o(e).then(function(e){e?(t.$message({type:"success",message:"删除成功"}),t.getTableData()):t.$message.error("服务器错误")})},saveOrUpdate:function(){var e=this;d(this.deviceTender).then(function(t){t.rowId?(e.showDialog=!1,e.$message({type:"success",message:"add"==e.flag?"新增成功":"修改成功"}),e.getTableData()):e.$message.error("服务器错误")})},cancelUpdate:function(){this.showDialog=!1,this.$refs.Form.resetFields()},handleSelectionChange:function(e){this.multipleSelection=e},current_change:function(e){this.currentPage=e,this.getTableData()},deviceTypeFmt:function(e){switch(e.deviceType){case"00":return"灯杆";case"01":return"灯";case"02":return"单灯控制器";case"03":return"集中控制器";case"04":return"LED";case"05":return"传感器";case"06":return"一键报警";case"07":return"监控";default:return"未定义"}}}},s={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-row",[l("el-col",{attrs:{span:16}},[l("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")]),e._v(" "),l("el-button",{on:{click:function(t){return e.handleEdit()}}},[e._v("编辑")]),e._v(" "),l("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.handleDelete()}}},[e._v("删除")])],1)],1),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{prop:"venderCode",label:"社会信用代码"}}),e._v(" "),l("el-table-column",{attrs:{prop:"venderName",label:"厂家名称"}}),e._v(" "),l("el-table-column",{attrs:{prop:"deviceType",label:"厂家类型",formatter:e.deviceTypeFmt}}),e._v(" "),l("el-table-column",{attrs:{prop:"venderAddr",label:"厂家地址"}}),e._v(" "),l("el-table-column",{attrs:{prop:"venderPhone",label:"联系方式"}}),e._v(" "),l("el-table-column",{attrs:{prop:"venderPrincipal",label:"负责人"}})],1),e._v(" "),l("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[l("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total},on:{"current-change":e.current_change}})],1),e._v(" "),l("el-dialog",{staticClass:"dialog-common-sys",attrs:{title:e.dialogTitle,visible:e.showDialog,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showDialog=t},close:function(t){return e.cancelUpdate()}}},[l("el-form",{ref:"Form",attrs:{model:e.deviceTender,rules:e.rules}},[l("el-row",[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"社会信用代码","label-width":e.formLabelWidth,prop:"venderCode"}},[l("el-input",{attrs:{"auto-complete":"off",placeholder:"请填写社会信用代码"},model:{value:e.deviceTender.venderCode,callback:function(t){e.$set(e.deviceTender,"venderCode",t)},expression:"deviceTender.venderCode"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"厂家名称","label-width":e.formLabelWidth,prop:"venderName"}},[l("el-input",{attrs:{"auto-complete":"off",placeholder:"请填写厂家名称"},model:{value:e.deviceTender.venderName,callback:function(t){e.$set(e.deviceTender,"venderName",t)},expression:"deviceTender.venderName"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"厂家类型","label-width":e.formLabelWidth,prop:"deviceType"}},[l("el-select",{attrs:{placeholder:"请选择厂家类型"},model:{value:e.deviceTender.deviceType,callback:function(t){e.$set(e.deviceTender,"deviceType",t)},expression:"deviceTender.deviceType"}},e._l(e.deviceTypeOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"厂家地址","label-width":e.formLabelWidth,prop:"venderAddr"}},[l("el-input",{attrs:{"auto-complete":"off",placeholder:"请填写厂家地址"},model:{value:e.deviceTender.venderAddr,callback:function(t){e.$set(e.deviceTender,"venderAddr",t)},expression:"deviceTender.venderAddr"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"联系方式","label-width":e.formLabelWidth,prop:"venderPhone"}},[l("el-input",{attrs:{"auto-complete":"off",placeholder:"请填写联系方式"},model:{value:e.deviceTender.venderPhone,callback:function(t){e.$set(e.deviceTender,"venderPhone",t)},expression:"deviceTender.venderPhone"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"负责人","label-width":e.formLabelWidth,prop:"venderPrincipal"}},[l("el-input",{attrs:{"auto-complete":"off",placeholder:"请填写负责人"},model:{value:e.deviceTender.venderPrincipal,callback:function(t){e.$set(e.deviceTender,"venderPrincipal",t)},expression:"deviceTender.venderPrincipal"}})],1)],1)],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){return e.cancelUpdate()}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveOrUpdate()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},u=l("VU/8")(c,s,!1,null,null,null);t.default=u.exports}});