webpackJsonp([15],{"6VyM":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("ySHF"),l=a("j9ys"),i=a("kTXO"),s={data:function(){return{total:null,pageSize:10,currentPage:null,tableData:[],multipleSelection:[],searchInfo:"",dialogObj:{isShow:!1,title:"",rowId:""}}},methods:{hasPerms:function(e){return Object(i.a)(e)&!this.disabled},getTableData:function(){var e=this;n.a.getList(this.currentPage,this.pageSize,this.searchInfo).then(function(t){e.tableData=t.records,e.total=t.total})},doDelete:function(e){var t=this;n.a.doDelete(e).then(function(e){e?(t.$message({type:"success",message:"删除成功"}),t.getTableData()):t.$message.error("服务器错误")})},getCurrentPage:function(){var e=this.$route.query;e&&(e.page?this.currentPage=parseInt(e.page):this.currentPage=1)},handleClose:function(){this.dialogObj.isShow=!1,this.dialogObj.rowId=""},handleAdd:function(){this.dialogObj.isShow=!0,this.dialogObj.title="新增"},handleEdit:function(){0!=this.multipleSelection.length?1===this.multipleSelection.length?(this.dialogObj.rowId=this.multipleSelection[0].rowId,this.dialogObj.isShow=!0,this.dialogObj.title="编辑"):this.$message({type:"warning",message:"不支持多条编辑"}):this.$message({type:"warning",message:"请先选择一条记录"})},handleDelete:function(){var e=this;0!=this.multipleSelection.length?this.$confirm("确定要删除此条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.multipleSelection.map(function(e){t.push(e.rowId)}),e.doDelete(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({type:"warning",message:"请先选择一条记录"})},handleSelectionChange:function(e){this.multipleSelection=e},current_change:function(e){this.currentPage=e,this.getTableData()},init:function(){this.getCurrentPage(),this.getTableData()}},created:function(){this.init()},components:{edit:l.default}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{background:"#fff"}},[a("el-row",[a("el-col",{attrs:{span:16}},[e.hasPerms("sensorConfig-xz001")?a("el-button",{attrs:{type:"success"},on:{click:e.handleAdd}},[e._v("新增")]):e._e(),e._v(" "),e.hasPerms("sensorConfig-bj001")?a("el-button",{on:{click:e.handleEdit}},[e._v("编辑")]):e._e(),e._v(" "),e.hasPerms("sensorConfig-sc001")?a("el-button",{attrs:{type:"danger"},on:{click:e.handleDelete}},[e._v("删除")]):e._e()],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入传感器名称"},model:{value:e.searchInfo,callback:function(t){e.searchInfo=t},expression:"searchInfo"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:e.init}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sensorName",label:"传感器名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sensorModelName",label:"传感器型号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"registration",label:"传感器注册包"}}),e._v(" "),a("el-table-column",{attrs:{prop:"onlinestate",label:"在线状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n          "+e._s(e._f("cameraStatusFlag")(t.row.onlinestate))+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"lampPostCode",label:"所属灯杆"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.total,"page-size":e.pageSize},on:{"current-change":e.current_change}})],1),e._v(" "),a("edit",{attrs:{dialogObj:e.dialogObj},on:{handleClose:e.handleClose,init:e.init}})],1)},staticRenderFns:[]},r=a("VU/8")(s,o,!1,null,null,null);t.default=r.exports}});