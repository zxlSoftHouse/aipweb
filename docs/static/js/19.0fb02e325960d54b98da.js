webpackJsonp([19],{X3Z5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("vLgD"),o=function(e){return Object(r.a)({url:"api/SERVICE-AIP/lampRunAlarm/queryAlarmPage",method:"post",data:e})},l=function(){return Object(r.a)({url:"api/SERVICE-AIP/project/queryList",method:"post",data:{}})},n=function(e){return Object(r.a)({url:"api/SERVICE-AIP/road/queryList",method:"post",data:{projectId:e}})},c=a("0xDb"),i={data:function(){return{total:0,pageSize:10,currentPage:1,tableData:[],multipleSelection:[],date:[],searchInfo:{projectId:"",roadId:""},options:{project:[],road:[]}}},mounted:function(){this.getTableData()},methods:{alarmTimeFormat:function(e){return null===e.alarmTime?"暂无数据":Object(c.parseTime)(e.alarmTime,"{y}-{m}-{d} {h}:{i}")},resolvedTimeFormat:function(e){return null===e.resolvedTime?"暂无数据":Object(c.parseTime)(e.resolvedTime,"{y}-{m}-{d} {h}:{i}")},deviceTypeFormat:function(e){if(null===e.deviceType)return"暂无数据";switch(e.deviceType){case"0":return"集控器";case"1":return"单控器";default:return"未知"}},devicePowerSrcFormat:function(e){if(null===e.devicePowerSrc)return"暂无数据";switch(e.devicePowerSrc){case"0":return"市电";case"1":return"太阳能";default:return"未知"}},resolvedStateFormat:function(e){if(null===e.resolvedState)return"暂无数据";switch(e.resolvedState){case"0":return"未解决";case"1":return"解决";default:return"未知"}},getTableData:function(){var e=this,t={pageNum:this.currentPage,pageSize:this.pageSize,projectId:this.searchInfo.projectId,roadId:this.searchInfo.roadId};o(t).then(function(t){e.total=t.total,e.tableData=t.records})},queryProjectOptions:function(){var e=this;l().then(function(t){e.options.project=t})},queryRoadOptions:function(){var e=this;n(this.searchInfo.projectId).then(function(t){e.options.road=t})},handleWarning:function(){},current_change:function(e){this.currentPage=e,this.getTableData()},handleSelectionChange:function(e){this.multipleSelection.length>1&&this.$refs.multipleTable.toggleRowSelection(this.multipleSelection[0])}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{type:"flex",align:"middle",gutter:22}},[a("div",[e._v("项目")]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{model:{value:e.searchInfo.projectId,callback:function(t){e.$set(e.searchInfo,"projectId",t)},expression:"searchInfo.projectId"}},e._l(e.options.project,function(t){return a("el-option",{key:t.rowId,attrs:{label:t.projectName,value:t.rowId},on:{change:e.selectProject}})}),1)],1),e._v(" "),a("div",[e._v("路段")]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{model:{value:e.searchInfo.roadId,callback:function(t){e.$set(e.searchInfo,"roadId",t)},expression:"searchInfo.roadId"}},e._l(e.options.road,function(t){return a("el-option",{key:t.rowId,attrs:{label:t.roadName,value:t.rowId},on:{change:e.selectRoad}})}),1)],1),e._v(" "),a("div",[e._v("选择日期")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),a("el-button",{on:{click:e.handleWarning}},[e._v("处理报警")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"设备名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceType",label:"设备类型",formatter:e.deviceTypeFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"devicePowerSrc",label:"设备能源类型",formatter:e.devicePowerSrcFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmType",label:"告警类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmTime",label:"告警时间",formatter:e.alarmTimeFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmContent",label:"告警内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resolvedState",label:"解决状态",formatter:e.resolvedStateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"resolvedTime",label:"解决时间",formatter:e.resolvedTimeFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"resolvedUser",label:"解决人"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total},on:{"current-change":e.current_change}})],1)],1)},staticRenderFns:[]},u=a("VU/8")(i,s,!1,null,null,null);t.default=u.exports}});