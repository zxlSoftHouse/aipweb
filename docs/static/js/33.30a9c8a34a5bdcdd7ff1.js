webpackJsonp([33],{ZjyI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("hBBC"),a=n("qGol"),i=n("yFXu"),o={data:function(){return{total:0,pageCount:10,pageIndex:0,tableData:[],multipleSelection:[],searchInfo:"",dialogObj:{isShow:!1,title:"",tid:""},volumeDialog:{isHidden:!1}}},methods:{getTableData:function(){var e=this,t=this,n={pageIndex:t.pageIndex,pageCount:t.pageCount,groupName:"*",showType:0,user:"admin",simple:1};l.a.getList(n).then(function(n){e.tableData=n.rows,t.total=parseInt(n.total)})},getCurrentPage:function(){var e=this.$route.query;e&&(e.page?this.currentPage=parseInt(e.page):this.currentPage=1)},handleClose:function(){this.dialogObj.isShow=!1,this.dialogObj.tid=""},handleAdd:function(){this.dialogObj.isShow=!0,this.dialogObj.title="新增"},handleEdit:function(){0!=this.multipleSelection.length?1===this.multipleSelection.length?(this.dialogObj.tid=this.multipleSelection[0].rowId,this.dialogObj.isShow=!0,this.dialogObj.title="编辑"):this.$message({type:"warning",message:"不支持多条编辑"}):this.$message({type:"warning",message:"请先选择一条记录"})},doDelete:function(e){var t=this;l.a.doDelete(e).then(function(e){e?(t.$message({type:"success",message:"删除成功"}),t.getTableData()):t.$message.error("服务器错误")})},volumeChange:function(){1==this.multipleSelection.length?this.volumeDialog.isHidden=!0:this.multipleSelection.length>1?this.$message({type:"warning",message:"只能选择一条记录"}):this.$message({type:"warning",message:"请先选择一条记录"})},handleVolumeClose:function(){this.volumeDialog.isHidden=!1},handleDelete:function(){var e=this;1==this.multipleSelection.length?this.$confirm("确定要删除此条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;e.multipleSelection.map(function(e){t=e.id});var n={tid:t};e.doDelete(n)}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.multipleSelection.length>1?this.$message({type:"warning",message:"只能选择一条记录"}):this.$message({type:"warning",message:"请先选择一条记录"})},handleSelectionChange:function(e){this.multipleSelection=e},current_change:function(e){this.currentPage=e,this.getTableData()},init:function(){this.getCurrentPage(),this.getTableData()}},created:function(){this.init()},components:{edit:a.default,volume:i.default}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{background:"#fff"}},[n("el-row",[n("el-col",{attrs:{span:16}},[n("el-button",{attrs:{type:"success"},on:{click:e.handleAdd}},[e._v("新增")]),e._v(" "),n("el-button",{on:{click:e.handleEdit}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.handleDelete}},[e._v("删除")])],1)],1),e._v(" "),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"终端编号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"终端名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ip",label:"IP地址"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bcoutv",label:"广播输出音量"}}),e._v(" "),n("el-table-column",{attrs:{prop:"state",label:"终端状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v("\n          "+e._s(e._f("cameraStatusFlag")(t.row.state))+"\n        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"task",label:"任务状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v("\n          "+e._s(e._f("equipTaskFlag")(t.row.task))+"\n        ")])]}}])})],1),e._v(" "),n("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.total,"page-size":e.pageCount},on:{"current-change":e.current_change}})],1),e._v(" "),n("edit",{attrs:{dialogObj:e.dialogObj,singInfo:e.multipleSelection},on:{handleClose:e.handleClose,init:e.init}}),e._v(" "),n("volume",{attrs:{volumeDialog:e.volumeDialog,singVolume:e.multipleSelection},on:{init:e.init,handleVolumeClose:e.handleVolumeClose}})],1)},staticRenderFns:[]},u=n("VU/8")(o,s,!1,null,null,null);t.default=u.exports}});